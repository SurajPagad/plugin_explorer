<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[
var sampleApps = angular.module('sn_sampleApps', []);
sampleApps.controller('mainCtrl', function($scope) {
    $scope.artifacts = [];
    $scope.loading = false;
    $j("#app_id_hidden").change(function() {
        var appID = gel('app_id_hidden').value;
        var appName = gel('sys_display.app').value;
        if (appID) {
            $scope.$apply(function() {
                $scope.loading = true;
                $scope.appName = appName;
            });
            var ga = new GlideAjax('GetAppArtifacts');
            ga.addParam('sysparm_name', 'getAppArtifacts');
            ga.addParam('sysparm_app_id', appID);
            ga.getXML(callBack);
        }

        function callBack(response) {
            var answer = response.responseXML.documentElement.getAttribute("answer");
            var parsedAnswer = JSON.parse(answer);
            $scope.$apply(function() {
                $scope.artifacts = parsedAnswer.artifacts;
                $scope.loading = false;
            });
        }
    });

    $scope.toggleExpandCollapseAll = function() {
        $scope.artifacts.forEach(function(artifact, artifactIdx) {
            artifact.types.forEach(function(type, typeIdx) {
                $j('#artifact' + artifactIdx + '_type' + typeIdx).collapse('toggle');
            });
            $j('#artifact' + artifactIdx).collapse('toggle');
        });
		$j('i.rotate').toggleClass('icon-chevron-right icon-chevron-down');
    };

    $scope.setMode = function() {
        $j('body').toggleClass('dark-mode');
        if ($scope.buttonLabel === 'Dark mode') {
            $scope.buttonLabel = 'Light mode';
        } else {
            $scope.buttonLabel = 'Dark mode';
        }
    };

    $scope.toggleIcon = function(event) {
        var target = $j(event.target);
        var tag = target.prop("tagName");
        if (tag == 'I') {
            target.toggleClass('icon-chevron-right icon-chevron-down');
        } else {
            target.siblings('i').toggleClass('icon-chevron-right icon-chevron-down');
        }
    };

    $scope.getlink = function(artifactItem) {
        return '/sys_metadata.do?sys_id=' + artifactItem.sysId;
    };

});

function setHiddenInput() {
    $j('#app_id_hidden').val(gel('app').value).trigger('change');
}]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint/>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8"?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
    <g2:requires name="scripts/angular_includes_1.4.js" includes="true" />
    <div data-doctype="true" ng-app="sn_sampleApps">
        <div ng-controller="mainCtrl">
            <p>Select an application to fetch the artifacts</p>
            <div class="row justify-content-start">
                <div class="col-sm-3">
                    <g:ui_reference name="app" id="app_id" table="sys_scope" query="active=true" ng-model="app_id_model"
                        completer="AJAXTableCompleter" onchange="setHiddenInput()" columns="scope" />
                </div>
                <div class="col-sm-1">
                    <button ng-click="setMode()" ng-init="buttonLabel='Dark mode'">{{buttonLabel}}</button>
                </div>
                <div ng-if="artifacts.length > 0" class="col-sm-1">
                    <button ng-click="toggleExpandCollapseAll()" title='Expand/Collapse All'>[Expand/Collapse]</button>
                </div>
            </div>
            <input type="HIDDEN" name="app_id_hidden" ng-model='app_id_hidden' id="app_id_hidden" />
            <div class="row">
                <div class="col-sm-4">
                    <div ng-if="loading">
                        Please wait fetching artifacts for "{{appName}}".
                    </div>
                    <ul ng-if="artifacts.length > 0 &amp;&amp; !loading" class="main-ul">
                        <li ng-repeat="artifact in artifacts" ng-init="artifactIndex = $index">
                            <span data-toggle="collapse" data-target="#artifact{{artifactIndex}}"
                                 class="list-label" ng-click="toggleIcon($event)"><i class="icon-chevron-down rotate"></i><b>{{ artifact.name }}</b></span>
                            <ul ng-if="artifact.types &amp;&amp; artifact.types.length > 0" class="collapse in"
                                id="artifact{{artifactIndex}}">
                                <li ng-repeat="type in artifact.types">
                                    <span ng-if="type.artifacts &amp;&amp; type.artifacts.length > 0">
                                        <span data-toggle="collapse"
                                            data-target="#artifact{{artifactIndex}}_type{{$index}}"
                                            ng-click="toggleIcon($event)" class="list-label"><i class="icon-chevron-down rotate"></i><b>{{ type.name }}</b></span>
                                        <ul ng-if="type.artifacts.length > 0" class="collapse in"
                                            id="artifact{{artifactIndex}}_type{{$index}}">
                                            <li ng-repeat="artifactItem in type.artifacts">
                                                <span><a href='{{getlink(artifactItem)}}'
                                                        target='_blank'>{{artifactItem.name}}
													âžš</a><span ng-if="artifactItem.isCustomized"> [Customized]</span>
												</span>
                                            </li>
                                        </ul>
                                    </span>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <style>
        ul {
            list-style: none
        }

        ul.main-ul {
            padding-left: 0px;
        }

        i {
            margin-right: 5px
        }

        .dark-mode {
            background-color: #121212;
            color: #6002EE;
        }
		
    </style>
</j:jelly>]]></html>
        <name>application_explorer</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-08-09 16:09:42</sys_created_on>
        <sys_id>388fd4902f191110916d50492799b6d9</sys_id>
        <sys_mod_count>188</sys_mod_count>
        <sys_name>application_explorer</sys_name>
        <sys_package display_value="Application explorer" source="a38bf21c2f891110916d50492799b605">a38bf21c2f891110916d50492799b605</sys_package>
        <sys_policy/>
        <sys_scope display_value="Application explorer">a38bf21c2f891110916d50492799b605</sys_scope>
        <sys_update_name>sys_ui_page_388fd4902f191110916d50492799b6d9</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-05-13 19:13:22</sys_updated_on>
    </sys_ui_page>
    <sys_claim action="INSERT_OR_UPDATE">
        <claim_owner_scope display_value="Application explorer">a38bf21c2f891110916d50492799b605</claim_owner_scope>
        <claim_timestamp>1858b1a3d800000001</claim_timestamp>
        <metadata_update_name>sys_ui_page_388fd4902f191110916d50492799b6d9</metadata_update_name>
        <previous_claim_app_version>1.0.0</previous_claim_app_version>
        <previous_claim_name>Plugin Explorer</previous_claim_name>
        <previous_claim_scope>a38bf21c2f891110916d50492799b605</previous_claim_scope>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-01-07 07:20:30</sys_created_on>
        <sys_id>19ae04302f5825103df358492799b6d7</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-01-07 07:20:30</sys_updated_on>
    </sys_claim>
    <sys_claim action="INSERT_OR_UPDATE">
        <claim_owner_scope display_value="Application explorer">a38bf21c2f891110916d50492799b605</claim_owner_scope>
        <claim_timestamp>1858b1a3d490000001</claim_timestamp>
        <metadata_update_name>sys_ui_page_388fd4902f191110916d50492799b6d9</metadata_update_name>
        <previous_claim_app_version>1.0.0</previous_claim_app_version>
        <previous_claim_name>Table configuration</previous_claim_name>
        <previous_claim_scope>9c555b512f941110916d50492799b6fa</previous_claim_scope>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-01-07 07:20:30</sys_created_on>
        <sys_id>d9ae04302f5825103df358492799b6d7</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-01-07 07:20:30</sys_updated_on>
    </sys_claim>
</record_update>
